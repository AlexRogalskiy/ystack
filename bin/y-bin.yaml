#!/usr/bin/env y-bin-download

# This yaml format has special requirements as it must be parsed on vanilla osx and linux:
# - version must be the first key per binary name
# - comments must be separate lines, not after values


# NOTE yq must be first in the file because this script depends on it
yq:
  version: 4.14.1
  sha256:
    darwin_amd64: fa5ebd853506a1d0c9b9b97f5ee13183f0262da141936dc266f820f6c99e5902
    darwin_arm64: 9db77866ea2368a74b498e4f799178f14659f3671d8cf2bb687392baa898566e
    linux_amd64: 28e9623452c5da978ec3630c64d838a94f7a6bdd219da0db6f6cb042b5e06d07
  templates:
    download: https://github.com/mikefarah/yq/releases/download/v${version}/yq_${os}_${arch}
    # Must be parsed based on: https://github.com/mikefarah/yq/releases/download/v${version}/checksums_hashes_order
    # sha256: https://github.com/mikefarah/yq/releases/download/v${version}/checksums

jq:
  version: 1.6
  template:
    # current release has no darwin-arm64 builds, let's rely on rosetta 2 (which we need for docker anyway)
    #download: https://github.com/stedolan/jq/releases/download/jq-${version}/jq-${osx}-${arch}
    download: https://github.com/stedolan/jq/releases/download/jq-${version}/jq-${osx}-amd64
  sha256:
    darwin_arm64: 5c0a0a3ea600f302ee458b30317425dd9632d1ad8882259fcaf4e9b868b2b1ef
    darwin_amd64: 5c0a0a3ea600f302ee458b30317425dd9632d1ad8882259fcaf4e9b868b2b1ef
    linux_amd64: 0019dfc4b32d63c1392aa264aed2253c1e0c2fb09216f8e2cc269bbfb8bb49b5

kubectl:
  version: 1.21.7
  template:
    download: https://dl.k8s.io/v${version}/kubernetes-client-${os}-${arch}.tar.gz
  sha256:
    linux_amd64: a55f740b6124f0b9d4612a7917a6f19e7f6181f10923cde728bcd798d8b8c32b
    darwin_amd64: dd0dc1d1f8c1879b53c5b2e356241f874cc13dc6accbe52ba135be4109c34ebc
    darwin_arm64: afd2e493962b2c3b21aa66a2b64e703936efc1ccd702bf8181d1a9d5dae745cc
  archive:
    tool: tar
    path: kubernetes/client/bin/kubectl

kustomize:
  # TODO with tag from version in ./y-kubectl
  # https://github.com/kubernetes/kubernetes/blob/v1.23.0-alpha.4/staging/src/k8s.io/kubectl/go.mod#L44
  version: 4.4.1
  template:
    download: https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv${version}/kustomize_v${version}_${os}_${arch}.tar.gz
    sha256: https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv${verison}/checksums.txt
  sha256:
    linux_amd64: 2d5927efec40ba32a121c49f6df9955b8b8a296ef1dec4515a46fc84df158798
    darwin_amd64: 1b0eba143cd684f98341d58100c17a2dfb9658375302fe38d725752ea92012ac
    darwin_arm64: 689d873b30dc052a51e737eaf20a416e1a72a6d8f85e5d9c4969515fa2ad578c
  archive:
    tool: tar
    path: kustomize

skaffold:
  version: 1.35.0
  template:
    download: https://github.com/GoogleContainerTools/skaffold/releases/download/v${version}/skaffold-${os}-${arch}
    sha256: https://github.com/GoogleContainerTools/skaffold/releases/download/v${version}/skaffold-${os}-${arch}.sha256
  sha256:
    darwin_amd64: 47b7d68f258f2cdcb8453b7d2ccaf46c76fc525a0f4bb48f24d9cf5f573a8b71
    darwin_arm64: d145ff15e0e3428b3ddc1c01e3ec4928a78fb6ac07fec8eb6a6f7a13dc43a05e
    linux_amd64: ab8c4b62cc20f61f97f6df83631b655433067c1a166cb39c1246cd20b56e3a35

helm:
  version: 3.7.1
  sha256:
    darwin_amd64: 3a9efe337c61a61b3e160da919ac7af8cded8945b75706e401f3655a89d53ef5
    darwin_arm64: 733fa6731b396514071b4dbc66614bd3be8e1f079f86594ab449649441bf18f1
    linux_amd64: 6cd6cad4b97e10c33c978ff3ac97bb42b68f79766f1d2284cfd62ec04cd177f4
  archive:
    tool: tar
    path: ${os}-${arch}/helm
  templates:
    download: https://get.helm.sh/helm-v${version}-${os}-${arch}.tar.gz
    sha256: https://get.helm.sh/helm-v${version}-${os}-${arch}.tar.gz.sha256sum

k3d:
  version: 5.2.2
  templates:
    download: https://github.com/rancher/k3d/releases/download/v${version}/k3d-${os}-${arch}
    sha256: https://github.com/rancher/k3d/releases/download/v${version}/sha256sum.txt
  sha256:
    darwin_amd64: 40ac312bc762611de80daff24cb66d79aaaf17bf90e5e8d61caf90e63b57542d
    darwin_arm64: d0149ecb9b3fb831d617a0a880d8235722a70b9131f45f1389235e586050f8f9
    linux_amd64: 7ddb900e6e50120b65d61568f6af007a82331bf83918608a6a7be8910792faef

kubefwd:
  version: 1.22.0
  templates:
    download: https://github.com/txn2/kubefwd/releases/download/${version}/kubefwd_${Os}_${xarch}.tar.gz
  sha256:
    darwin_amd64: 69e30718737cffd61979d2baf4bea01555299826e49016bc0b82987d7a8708c4
    darwin_arm64: 48ff8e49842a4fb3ee042b4a1f8c8c9fca66f2d68322d702e8c671f0dd20f4ab
    linux_amd64: 7bcd135021a2fbf6d5da7b2aff0a27e8eb2edeb39814daf3ab1cc9dff68388f7
  archive:
    tool: tar
    path: kubefwd

kpt:
  version: 1.0.0-beta.9
  templates:
    download: https://github.com/GoogleContainerTools/kpt/releases/download/v${version}/kpt_${os}_${arch}
    sha256: https://github.com/GoogleContainerTools/kpt/releases/download/v${version}/checksums.txt
  sha256:
    darwin_amd64: f5a87f834ea2f05cd4d38a45c79c0ebc3a1e6dc2552d5f1b1586c2e49263e8c7
    darwin_arm64: 498718084e9546d686463b6d4ecc7ce4d4afa39ac59627e5a56424b6d09a0925
    linux_amd64: cff0ea7b87ee3d0f4b9b174eaddea7a3b977f81c1a5f7dfa6f5bb00325664f58

buildctl:
  version: 0.9.3
  templates:
    download: https://github.com/moby/buildkit/releases/download/v${version}/buildkit-v${version}.${os}-${arch}.tar.gz
  sha256:
    darwin_amd64: 0f5e72298682529a35c16256b192b56faeac2b4cc5786998fa55eebe9335e677
    darwin_arm64: 29bd7b9972c8aae240192de8d16ffea38876e4e67000d00a11706e036cb295d9
    linux_amd64: f60461abdf2aee8444a4cb0607e4766da3bd503859320819ea8c43fe4a02576c
  archive:
    tool: tar
    #path: $(test 'linux' = $os && echo "bin/buildctl" || echo "buildctl")
    path: bin/buildctl

crane:
  version: 0.7.0
  templates:
    download: https://github.com/google/go-containerregistry/releases/download/v${version}/go-containerregistry_${Os}_${xarch}.tar.gz
    sha256: https://github.com/google/go-containerregistry/releases/download/v${version}/checksums.txt
  sha256:
    darwin_amd64: 833f828bf08e3dddcaf5276ec27f7c6d029b20128a86c221bbe0d5c2d34daaa2
    darwin_arm64: 487edf306f9bcf0447238d66d1e4a079a52594967412b125c9778c8f6caaf14e
    linux_amd64: 14092fd3c5d6566f8bd53875dc7cbdc187d9e93f28dab1c677d1ee5959cb703c
  archive:
    tool: tar
    path: crane

container-structure-test:
  version: 1.11.0
  templates:
    # arm64 binary not yet available
    download: https://storage.googleapis.com/container-structure-test/v${version}/container-structure-test-${os}-amd64
    sha256: https://github.com/GoogleContainerTools/container-structure-test/releases/download/v${version}/container-structure-test-${os}-amd64.sha256
  sha256:
    darwin_amd64: 0a4ac9e221a86cda6bb9fedb2a0dfdce56f918327b8881977ad787ea15d0e82f
    darwin_arm64: 0a4ac9e221a86cda6bb9fedb2a0dfdce56f918327b8881977ad787ea15d0e82f
    linux_amd64: 1524da5fd5a0fc88c4c9257a3de05a45f135df07e6a684380dd5f659b9ce189b

kubie:
  version: 0.15.1
  template:
    download: https://github.com/sbstp/kubie/releases/download/v${version}/kubie-${os}-${arch}
  sha256:
    darwin_amd64: c27c82bc574719d2ca2cd51bee059dbb4aea85609870c24c5aa5439e33b60d9c
    darwin_arm64: 158e1fe85ad3e2b7e33f0dafdb5e55671651f33c527123bcf53f7ade1af02c38
    linux_amd64: 6018e07cf39b469bc8d2ca354c0fee04c79e5d5db515b4de24bba419ddb72f53

fzf:
  version: 0.28.0
  template:
    download: https://github.com/junegunn/fzf/releases/download/${version}/fzf-${version}-${os}_${arch}.zip
    sha256: https://github.com/junegunn/fzf/releases/download/${version}/fzf_${version}_checksums.txt
  sha256:
    darwin_amd64: 21f9feddfa773ce092dec02acb033cfd88a71b531c93e046d32f187ee6ccc31a
    darwin_arm64: 78c5b032801c0cbc04b1a667f01a57789fac8e3701a697001efff056e45d981b
    linux_amd64: For_fzf_on_linux_use_a_package_manager
  archive:
    tool: zip
    path: fzf

oauth2l:
  version: 1.2.2
  template:
    download: https://github.com/solsson/oauth2l/releases/download/v${version}/${os}_${arch}.tgz
    sha256: https://github.com/solsson/oauth2l/releases/download/v${version}/sha256sum.txt
  sha256:
    darwin_amd64: fdd77f8fbcb27cd19d808675db80963279b7bbb9d80267405f5909250a5ea246
    darwin_arm64: 1e134219665af5229b43cd294f95f79d1601048fbde46d666fd23e4e876f82d9
    linux_amd64: 0803872f2afb447fee4767fca6af9aa1eb96506895d4d7713d2fbe780202016c
  archive:
    tool: tar
    path: ${os}_${arch}/oauth2l
