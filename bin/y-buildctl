#!/bin/sh
[ -z "$DEBUG" ] || set -x
set -e
YBIN="$(dirname $0)"

version=0.9.2

bin_tgz_path=buildctl
platform="$(uname -s)"
case "$platform" in
  Linux )
    bin_tgz_path=bin/buildctl
  ;;
esac

bin_name=buildctl \
  bin_version=v${version} \
  Darwin_url=https://github.com/moby/buildkit/releases/download/v${version}/buildkit-v${version}.darwin-amd64.tar.gz \
  Darwin_sha256=b5c20bc6a4ff553a2829249e08938ebb54dd1c986bb082f2b8fc234102a813f8 \
  Linux_url=https://github.com/moby/buildkit/releases/download/v${version}/buildkit-v${version}.linux-amd64.tar.gz \
  Linux_sha256=931d8bb6b461a396c54ed2ce4fa48a2d5eafeb6985a97823e39e549bc89bec27 \
  bin_tgz_path=$bin_tgz_path \
  y-bin-dependency-download || exit $?

y-buildctl-v${version}-bin "$@" || exit $?
