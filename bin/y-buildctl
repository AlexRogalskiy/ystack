#!/bin/sh
[ -z "$DEBUG" ] || set -x
set -e
YBIN="$(dirname $0)"

version=0.9.1

bin_tgz_path=buildctl
platform="$(uname -s)"
case "$platform" in
  Linux )
    bin_tgz_path=bin/buildctl
  ;;
esac

bin_name=buildctl \
  bin_version=v${version} \
  Darwin_url=https://github.com/moby/buildkit/releases/download/v${version}/buildkit-v${version}.darwin-amd64.tar.gz \
  Darwin_sha256=488148cb50b25595436ce6ef535bbf98ba1d0eb5eeb53c5cf94aea88a811a308 \
  Linux_url=https://github.com/moby/buildkit/releases/download/v${version}/buildkit-v${version}.linux-amd64.tar.gz \
  Linux_sha256=f5c82431fb9e672e1f900b5623433fb4d477e80e16ca4c836d42594312e927a2 \
  bin_tgz_path=$bin_tgz_path \
  y-bin-dependency-download || exit $?

y-buildctl-v${version}-bin "$@" || exit $?
